(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(6429)}])},9720:function(e,t){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PrefetchKind:function(){return r},ACTION_REFRESH:function(){return l},ACTION_NAVIGATE:function(){return o},ACTION_RESTORE:function(){return a},ACTION_SERVER_PATCH:function(){return i},ACTION_PREFETCH:function(){return s},ACTION_FAST_REFRESH:function(){return c},ACTION_SERVER_ACTION:function(){return u},isThenable:function(){return d}});let l="refresh",o="navigate",a="restore",i="server-patch",s="prefetch",c="fast-refresh",u="server-action";function d(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(n=r||(r={})).AUTO="auto",n.FULL="full",n.TEMPORARY="temporary",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},245:function(e,t,r){"use strict";function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(9082),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1032:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let n=r(8754)._(r(7294)),l=r(4879),o=r(1572),a=r(8373),i=r(6221),s=r(5933),c=r(4167),u=r(8874),d=r(6342),f=r(245),p=r(6015),h=r(9720),m=new Set;function b(e,t,r,n,l,a){if(a||(0,o.isLocalURL)(t)){if(!n.bypassPrefetchedCheck){let l=t+"%"+r+"%"+(void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0);if(m.has(l))return;m.add(l)}Promise.resolve(a?e.prefetch(t,l):e.prefetch(t,r,n)).catch(e=>{})}}function j(e){return"string"==typeof e?e:(0,a.formatUrl)(e)}let x=n.default.forwardRef(function(e,t){let r,a;let{href:m,as:x,children:y,prefetch:g=null,passHref:_,replace:v,shallow:C,scroll:N,locale:O,onClick:E,onMouseEnter:P,onTouchStart:T,legacyBehavior:k=!1,...w}=e;r=y,k&&("string"==typeof r||"number"==typeof r)&&(r=n.default.createElement("a",null,r));let R=n.default.useContext(c.RouterContext),S=n.default.useContext(u.AppRouterContext),M=null!=R?R:S,A=!R,I=!1!==g,L=null===g?h.PrefetchKind.AUTO:h.PrefetchKind.FULL,{href:U,as:F}=n.default.useMemo(()=>{if(!R){let e=j(m);return{href:e,as:x?j(x):e}}let[e,t]=(0,l.resolveHref)(R,m,!0);return{href:e,as:x?(0,l.resolveHref)(R,x):t||e}},[R,m,x]),K=n.default.useRef(U),Z=n.default.useRef(F);k&&(a=n.default.Children.only(r));let H=k?a&&"object"==typeof a&&a.ref:t,[D,G,q]=(0,d.useIntersection)({rootMargin:"200px"}),B=n.default.useCallback(e=>{(Z.current!==F||K.current!==U)&&(q(),Z.current=F,K.current=U),D(e),H&&("function"==typeof H?H(e):"object"==typeof H&&(H.current=e))},[F,H,U,q,D]);n.default.useEffect(()=>{M&&G&&I&&b(M,U,F,{locale:O},{kind:L},A)},[F,U,G,O,I,null==R?void 0:R.locale,M,A,L]);let V={ref:B,onClick(e){k||"function"!=typeof E||E(e),k&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(e),M&&!e.defaultPrevented&&function(e,t,r,l,a,i,s,c,u){let{nodeName:d}=e.currentTarget;if("A"===d.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!u&&!(0,o.isLocalURL)(r)))return;e.preventDefault();let f=()=>{let e=null==s||s;"beforePopState"in t?t[a?"replace":"push"](r,l,{shallow:i,locale:c,scroll:e}):t[a?"replace":"push"](l||r,{scroll:e})};u?n.default.startTransition(f):f()}(e,M,U,F,v,C,N,O,A)},onMouseEnter(e){k||"function"!=typeof P||P(e),k&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),M&&(I||!A)&&b(M,U,F,{locale:O,priority:!0,bypassPrefetchedCheck:!0},{kind:L},A)},onTouchStart(e){k||"function"!=typeof T||T(e),k&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),M&&(I||!A)&&b(M,U,F,{locale:O,priority:!0,bypassPrefetchedCheck:!0},{kind:L},A)}};if((0,i.isAbsoluteUrl)(F))V.href=F;else if(!k||_||"a"===a.type&&!("href"in a.props)){let e=void 0!==O?O:null==R?void 0:R.locale,t=(null==R?void 0:R.isLocaleDomain)&&(0,f.getDomainLocale)(F,e,null==R?void 0:R.locales,null==R?void 0:R.domainLocales);V.href=t||(0,p.addBasePath)((0,s.addLocale)(F,e,null==R?void 0:R.defaultLocale))}return k?n.default.cloneElement(a,V):n.default.createElement("a",{...w,...V},r)});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return s}});let n=r(7294),l=r(6231),o="function"==typeof IntersectionObserver,a=new Map,i=[];function s(e){let{rootRef:t,rootMargin:r,disabled:s}=e,c=s||!o,[u,d]=(0,n.useState)(!1),f=(0,n.useRef)(null),p=(0,n.useCallback)(e=>{f.current=e},[]);return(0,n.useEffect)(()=>{if(o){if(c||u)return;let e=f.current;if(e&&e.tagName)return function(e,t,r){let{id:n,observer:l,elements:o}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=i.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=a.get(n)))return t;let l=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=l.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:l},i.push(r),a.set(r,t),t}(r);return o.set(e,t),l.observe(e),function(){if(o.delete(e),l.unobserve(e),0===o.size){l.disconnect(),a.delete(n);let e=i.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&i.splice(e,1)}}}(e,e=>e&&d(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!u){let e=(0,l.requestIdleCallback)(()=>d(!0));return()=>(0,l.cancelIdleCallback)(e)}},[c,r,t,u,f.current]),[p,u,(0,n.useCallback)(()=>{d(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6429:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(5893),l=r(9008),o=r.n(l),a=r(7294),i=r(7066),s=r(1664),c=r.n(s);function u(){let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)([]),[s,u]=(0,a.useState)([]);if((0,a.useEffect)(()=>{(async function(){try{let e=await i.Z.get("http://localhost:4000/api/user",{withCredentials:!0});if(t(e.data.user),e.data.user){let e=await i.Z.get("http://localhost:4000/api/skins",{withCredentials:!0});l(e.data);let t=await i.Z.get("http://localhost:4000/api/tradeoffers",{withCredentials:!0});u(t.data)}}catch(e){console.error(e)}})()},[]),!e)return(0,n.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-pirateBlack text-pirateGold",children:(0,n.jsx)("p",{children:"Please login to view your dashboard."})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(),{children:(0,n.jsx)("title",{children:"Dashboard - Pirate Steam Trade Platform"})}),(0,n.jsxs)("main",{className:"min-h-screen bg-pirateBlack text-pirateGold p-8 font-pirate",children:[(0,n.jsxs)("h1",{className:"text-4xl mb-6",children:["Welcome, ",e.personaName]}),(0,n.jsxs)("section",{className:"mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl mb-4",children:"Your Skins"}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.map(e=>(0,n.jsxs)("div",{className:"bg-pirateGold bg-opacity-20 p-4 rounded",children:[(0,n.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-32 object-cover rounded mb-2"}),(0,n.jsx)("p",{children:e.name}),(0,n.jsx)("p",{className:"text-sm italic",children:e.game})]},e._id))})]}),(0,n.jsxs)("section",{className:"mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl mb-4",children:"Trade Offers"}),(0,n.jsxs)("div",{children:[0===s.length&&(0,n.jsx)("p",{children:"No trade offers."}),s.map(t=>(0,n.jsxs)("div",{className:"border border-pirateGold p-4 rounded mb-4",children:[(0,n.jsxs)("p",{children:["From: ",t.fromUser.personaName," To: ",t.toUser.personaName]}),(0,n.jsxs)("p",{children:["Status: ",t.status]}),(0,n.jsxs)("div",{className:"flex space-x-4 mt-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Offered Skins"}),(0,n.jsx)("ul",{children:t.offeredSkins.map(e=>(0,n.jsx)("li",{children:e.name},e._id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Requested Skins"}),(0,n.jsx)("ul",{children:t.requestedSkins.map(e=>(0,n.jsx)("li",{children:e.name},e._id))})]})]}),"pending"===t.status&&t.toUser._id===e._id&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("button",{className:"mr-2 px-4 py-2 bg-green-600 rounded hover:bg-green-700",onClick:()=>d(t._id),children:"Accept"}),(0,n.jsx)("button",{className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700",onClick:()=>f(t._id),children:"Reject"})]})]},t._id))]})]}),(0,n.jsx)(c(),{href:"/trade",children:(0,n.jsx)("a",{className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded text-white font-semibold transition",children:"Propose a Trade"})})]})]});async function d(e){try{await i.Z.post("http://localhost:4000/api/tradeoffers/".concat(e,"/accept"),{},{withCredentials:!0});let t=await i.Z.get("http://localhost:4000/api/tradeoffers",{withCredentials:!0});u(t.data)}catch(e){console.error(e)}}async function f(e){try{await i.Z.post("http://localhost:4000/api/tradeoffers/".concat(e,"/reject"),{},{withCredentials:!0});let t=await i.Z.get("http://localhost:4000/api/tradeoffers",{withCredentials:!0});u(t.data)}catch(e){console.error(e)}}}},1664:function(e,t,r){e.exports=r(1032)}},function(e){e.O(0,[703,774,888,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);