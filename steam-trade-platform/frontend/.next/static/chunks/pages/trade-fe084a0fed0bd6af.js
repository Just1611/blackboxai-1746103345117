(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[54],{6335:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trade",function(){return a(7370)}])},7370:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var r=a(5893),s=a(9008),n=a.n(s),i=a(7294),l=a(7066);function o(){let[e,t]=(0,i.useState)(null),[a,s]=(0,i.useState)([]),[o,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(""),[h,p]=(0,i.useState)([]),[m,f]=(0,i.useState)([]);if((0,i.useEffect)(()=>{(async function(){try{let e=await l.Z.get("http://localhost:4000/api/user",{withCredentials:!0});if(t(e.data.user),e.data.user){let t=await l.Z.get("http://localhost:4000/api/skins",{withCredentials:!0});s(t.data);let a=await l.Z.get("http://localhost:4000/api/admin/users",{withCredentials:!0});c(a.data.filter(t=>t._id!==e.data.user._id))}}catch(e){console.error(e)}})()},[]),!e)return(0,r.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-pirateBlack text-pirateGold",children:(0,r.jsx)("p",{children:"Please login to propose a trade."})});async function x(e){if(e.preventDefault(),!d||0===h.length||0===m.length){alert("Please select a user and at least one skin to offer and request.");return}try{await l.Z.post("http://localhost:4000/api/tradeoffers",{toUserId:d,offeredSkins:h,requestedSkins:m},{withCredentials:!0}),alert("Trade offer sent!"),u(""),p([]),f([])}catch(e){console.error(e),alert("Failed to send trade offer.")}}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"Propose Trade - Pirate Steam Trade Platform"})}),(0,r.jsxs)("main",{className:"min-h-screen bg-pirateBlack text-pirateGold p-8 font-pirate",children:[(0,r.jsx)("h1",{className:"text-4xl mb-6",children:"Propose a Trade"}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"toUser",className:"block mb-2",children:"Select User to Trade With"}),(0,r.jsxs)("select",{id:"toUser",value:d,onChange:e=>u(e.target.value),className:"bg-pirateGold bg-opacity-20 p-2 rounded w-full",children:[(0,r.jsx)("option",{value:"",children:"-- Select User --"}),o.map(e=>(0,r.jsx)("option",{value:e._id,children:e.personaName},e._id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-2",children:"Your Skins to Offer"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map(e=>(0,r.jsxs)("div",{className:"p-2 border rounded cursor-pointer ".concat(h.includes(e._id)?"border-green-500":"border-transparent"),onClick:()=>{var t;return t=e._id,void p(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},children:[(0,r.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-24 object-cover rounded"}),(0,r.jsx)("p",{className:"text-center",children:e.name})]},e._id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-2",children:"Skins You Want to Receive"}),(0,r.jsx)("textarea",{placeholder:"Enter skin names or IDs you want to receive, separated by commas",value:m.join(","),onChange:e=>f(e.target.value.split(",").map(e=>e.trim())),className:"w-full p-2 rounded bg-pirateGold bg-opacity-20"})]}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded text-white font-semibold transition",children:"Send Trade Offer"})]})]})]})}}},function(e){e.O(0,[703,774,888,179],function(){return e(e.s=6335)}),_N_E=e.O()}]);